--
-- DIS_ALL_DOCS  (View) 
--
CREATE OR REPLACE FORCE VIEW MASTER.DIS_ALL_DOCS
(DOCUMENT_ID, OWNER, DOCUMENT_NAME, COMMENTS, CREATE_DATE, 
 MODIFIED_DATE, MODIFIED_BY, DOC_LENGTH, DOCUMENT, BATCH)
AS 
SELECT "DOCUMENT_ID" ,  "OWNER" ,  "DOCUMENT_NAME" ,  "COMMENTS" ,  "CREATE_DATE" ,  "MODIFIED_DATE" ,  "MODIFIED_BY" ,  "DOC_LENGTH" ,  "DOCUMENT" ,  "BATCH" FROM DIS_DOCS_ A WHERE ((OWNER = USER) OR EXISTS(SELECT B.DOCUMENT_ID FROM DIS_GRANTS_ B WHERE A.DOCUMENT_ID = B.DOCUMENT_ID AND (UPPER(GRANTEE) = 'PUBLIC' OR USER LIKE UPPER(GRANTEE) OR UPPER(GRANTEE) IN (SELECT ROLE FROM SESSION_ROLES)))) WITH CHECK OPTION;


